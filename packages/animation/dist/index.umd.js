!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ruiku-animation"]={})}(this,(function(t){"use strict";function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function i(t,e){return t(e={exports:{}},e.exports),e.exports}var n=i((function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),o=e(n),r=i((function(t){t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports}));e(r);var s=i((function(t){function e(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=e=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=e=function(t,e,i){var n=r(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports),e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),u=e(s),l=i((function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(l);var a=e(i((function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports}))),c=i((function(t){function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));e(c);var h=i((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports}));e(h);var f=e(i((function(t){var e=c.default;t.exports=function(t,i){if(i&&("object"===e(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return h(t)},t.exports.__esModule=!0,t.exports.default=t.exports}))),p=e(i((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),d=e(i((function(t){function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports})));function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=o(t);if(e){var r=o(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}var y={queue:[],timer:0,isRunning:!1,register:function(t){-1==this.queue.indexOf(t)&&(this.queue.push(t),this.run())},unregister:function(t){var e=this.queue.indexOf(t);-1!=e&&(this.queue.splice(e,1),this.queue.length<1&&this.stop())},run:function(){this.isRunning||(this.isRunning=!0,this.timer=Date.now(),requestAnimationFrame(this.update.bind(this)))},stop:function(){this.isRunning&&(this.isRunning=!1)},update:function(){if(this.isRunning){var t=Date.now(),e=t-this.timer;this.timer=t;for(var i=this.queue.concat(),n=0,o=i.length;n<o;++n)i[n].update(e);requestAnimationFrame(this.update.bind(this))}}},m=function(){function t(){p(this,t),this.time=0,this.totalTime=0,this.isComplete=!1,this.callback=null}return d(t,[{key:"duration",value:function(t){return this.totalTime=t,this}},{key:"start",value:function(){y.register(this)}},{key:"update",value:function(t){}},{key:"onComplete",value:function(t){return this.callback=t,this}},{key:"stop",value:function(){this.isComplete||y.register(this)}}]),t}(),g=function(t){a(i,t);var e=x(i);function i(t){var n;return p(this,i),(n=e.call(this)).target=t,n.ox=n.target.offsetLeft,n.oy=n.target.offsetTop,n.dx=n.ox,n.dy=n.oy,n.isFromCurrent=!1,n}return d(i,[{key:"startFrom",value:function(t,e){return this.target.style.left=t+"px",this.target.style.top=e+"px",this.ox=t,this.oy=e,this.isFromCurrent=!1,this}},{key:"startFromCurrent",value:function(){return this.isFromCurrent=!0,this}},{key:"moveto",value:function(t,e){return this.dx=t,this.dy=e,this}},{key:"start",value:function(){this.isFromCurrent&&(this.ox=this.target.offsetLeft,this.oy=this.target.offsetTop),u(o(i.prototype),"start",this).call(this)}},{key:"update",value:function(t){if(this.time+=t,this.time>this.totalTime)this.callback&&this.callback(),this.target.style.left=this.dx+"px",this.target.style.top=this.dy+"px",y.unregister(this),this.isComplete=!0;else{var e=Math.floor((this.dx-this.ox)*this.time/this.totalTime+this.ox),i=Math.floor((this.dy-this.oy)*this.time/this.totalTime+this.oy);this.target.style.left=e+"px",this.target.style.top=i+"px"}}}]),i}(m),v=function(t){a(i,t);var e=x(i);function i(){return p(this,i),e.call(this)}return d(i,[{key:"update",value:function(t){this.time+=t,this.time>this.totalTime&&(this.callback&&this.callback(),this.callback=null,y.unregister(this),this.isComplete=!0)}}]),i}(m),b=function(t){a(i,t);var e=x(i);function i(t){var n;return p(this,i),(n=e.call(this)).target=t,n.oleft=n.target.scrollLeft,n.otop=n.target.scrollTop,n.dleft=n.oleft,n.dtop=n.otop,n}return d(i,[{key:"scrollTo",value:function(t,e){return this.dleft=t,this.dtop=e,this}},{key:"update",value:function(t){if(this.time+=t,this.time>this.totalTime)this.callback&&this.callback(),this.target.scrollLeft=this.dleft,this.target.scrollTop=this.dtop,y.unregister(this),this.isComplete=!0;else{var e=Math.floor((this.dleft-this.oleft)*this.time/this.totalTime+this.oleft),i=Math.floor((this.dtop-this.otop)*this.time/this.totalTime+this.otop);this.target.scrollLeft=e,this.target.scrollTop=i}}}]),i}(m),k=function(){function t(){p(this,t),this.callback=null,this.oncancle=null,this.stepCallBack=null,this.index=0,this.queue=[],this.isRunning=!1,this.runner=null}return d(t,[{key:"onComplete",value:function(t){return this.callback=t,this}},{key:"onCancle",value:function(t){return this.oncancle=t,this}},{key:"addAnimate",value:function(t){return this.queue.push(t),this}},{key:"start",value:function(){this.isRunning||(this.isRunning=!0,this.next())}},{key:"next",value:function(){if(this.stepCallBack&&this.stepCallBack(),this.stepCallBack=null,this.isRunning){if(this.index>=this.queue.length)return this.isRunning=!1,this.callback&&this.callback(),void(this.callback=null);this.runner=this.queue[this.index++],this.runner?(this.stepCallBack=this.runner.callback,this.runner.callback=this.next.bind(this),this.runner.start()):this.next()}}},{key:"stop",value:function(){this.isRunning=!1,this.runner&&this.runner.stop(),this.runner=null;for(var t=this.index,e=this.queue.length;t<e;++t)this.queue[t].stop();this.queue.length=0,this.oncancle&&this.oncancle(),this.oncancle=null}}]),t}();t.AnimateGroup=k,t.MoveAnimate=g,t.ScrollAnimate=b,t.WaitAnimate=v,Object.defineProperty(t,"__esModule",{value:!0})}));
